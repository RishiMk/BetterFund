server:
  port: 8080

spring:
  application:
    name: api-gateway

  cloud:
    gateway:
      routes:
        # 🔐 Authentication Service
        - id: AuthenticationService
          uri: http://localhost:8081
          predicates:
            - Path=/api/auth/**

        # 📣 Campaign Service
        - id: campaign-service
          uri: http://localhost:8082
          predicates:
            - Path=/api/campaign/**

        # ✅ Admin Campaign Approval
        - id: approve-campaign
          uri: http://localhost:8082
          predicates:
            - Path=/api/admin/campaigns/*/approve
          filters:
            - RewritePath=/api/admin/campaigns/(?<id>[^/]+)/approve, /api/admin/campaigns/${id}/approve

        # ❌ Admin Campaign Rejection
        - id: reject-campaign
          uri: http://localhost:8082
          predicates:
            - Path=/api/admin/campaigns/*/reject
          filters:
            - RewritePath=/api/admin/campaigns/(?<id>[^/]+)/reject, /api/admin/campaigns/${id}/reject

        # 🏆 Success Stories - List latest 4
        - id: get-success-stories
          uri: http://localhost:8085
          predicates:
            - Path=/api/successstories
          filters:
            - RewritePath=/api/successstories, /api/successstories

        # 🏆 Success Story by ID
        - id: get-success-story-by-id
          uri: http://localhost:8085
          predicates:
            - Path=/api/successstories/{id}
          filters:
            - RewritePath=/api/successstories/(?<id>.*), /api/successstories/${id}

        # 🏆 Success Story Image
        - id: get-success-story-image
          uri: http://localhost:8085
          predicates:
            - Path=/api/successstories/image/{id}
          filters:
            - RewritePath=/api/successstories/image/(?<id>.*), /api/successstories/image/${id}

        # 🏆 Create Success Story
        - id: create-success-story
          uri: http://localhost:8085
          predicates:
            - Path=/api/successstories
          filters:
            - RewritePath=/api/successstories, /api/successstories

        # 🏆 Completed Campaigns without Stories
        - id: get-completed-campaigns
          uri: http://localhost:8085
          predicates:
            - Path=/api/SuccessStories/completed

        # 🏆 Delete Success Story
        - id: delete-success-story
          uri: http://localhost:8085
          predicates:
            - Path=/api/successstories/{id}
          filters:
            - RewritePath=/api/successstories/(?<id>.*), /api/successstories/${id}

        # 💬 Comments Service (handled by .NET)
        - id: comments-service
          uri: http://localhost:8084
          predicates:
            - Path=/api/comments/**
          filters:
            - RewritePath=/api/comments(?<segment>/?.*), /api/comments${segment}

        # 📝 Feedback Service (handled by .NET)
        - id: feedback-service
          uri: http://localhost:8084
          predicates:
            - Path=/api/feedback/**
          filters:
            - RewritePath=/api/feedback(?<segment>/?.*), /api/feedback${segment}

        # 💸 Donation Service (.NET DonateController)
        - id: donate-service
          uri: http://localhost:8083
          predicates:
            - Path=/api/donate/**
          filters:
            - RewritePath=/api/donate(?<segment>/?.*), /api/donate${segment}

        # 👤 User Profile & Contributions (.NET UserController)
        - id: user-service
          uri: http://localhost:8083
          predicates:
            - Path=/api/user/**
          filters:
            - RewritePath=/api/user(?<segment>/?.*), /api/user${segment}

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka
